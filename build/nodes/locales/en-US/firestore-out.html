<!--
  Copyright 2023-2024 Gauthier Dandele

  Licensed under the MIT License,
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://opensource.org/licenses/MIT.

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="firestore-out">
	<p>Connects to a Cloud Firestore database and add/modify data to database.</p>
	<h3>Inputs</h3>
	<dl class="message-properties">
		<dt>payload<span class="property-type">object</span></dt>
		<dd>the data that will be sent to the database.</dd>
		<dt class="optional">method<span class="property-type">string</span></dt>
		<dd>the type of query to apply to the data  (set, update ou delete).</dd>
		<dt class="optional">options.merge<span class="property-type">boolean | string array</span></dt>
		<dd>s'il faut fusionner les données ou fusionner uniquement les propriétés du tableau.</dd>
	</dl>
	<h3>Details</h3>
	<p>This node allows you to add/modify data to the database.</p>
	<ul>
		<li><strong>Set</strong>: overwrite data on every write (merge option available).</li>
		<li><strong>Update</strong>: update values for each matching key in the database.</li>
		<li><strong>Remove</strong>: the data at the Firebase reference is removed.</li>
	</ul>
	<p>
		The <strong>Collection</strong> and <strong>Document</strong> determine where the data will be written.
		They can be set in the node or dynamically.
	</p>
	<p>
		The reserved keyword <code>"DELETE"</code> allows you to delete a property and its value from the database.
		It must be written in string format and can be used in an object.
	</p>
	<p>
		The reserved keyword <code>"TIMESTAMP"</code> allows you to use the database timestamp.
		It must be written in string format and can be used in an object.
	</p>
	<p>
		The reserved keyword <code>"INCREMENT [delta]"</code> preceded by a positive or negative integer allows you to increment
		a numeric value by a delta. The reserved keyword <code>"DECREMENT [delta]"</code> also exists.
		It must be written in string format and can be used in an object.
	</p>
	<p>
		The reserved keywords <code>"ARRAY_UNION"</code> and <code>"ARRAY_REMOVE"</code> allow to add/remove
		data to an array to the database. They must be written as follows and can be used in an object.
	</p>
	<pre>
{
  "my-array": {
    "ARRAY_UNION": "value-to-add"
  },
}</pre>
	<p>
		The reserved keyword <code>"GEO_POINT"</code> allows to create a Geo Point in the database.
		It must be written as follows and can be used in an object.
	</p>
	<pre>
{
"my-geo-point": {
  "GEO_POINT": {
    "latitude": 25,
    "longitude": 45
  }
},
}</pre>
	<p>
		All reserved keywords described above <strong>can NOT</strong> be used in an array.
		This is a known limitation of Firestore.
	</p>
	<p>
		Click <a href="https://github.com/GogoVega/node-red-contrib-cloud-firestore/wiki/firestore-out">here</a>
		to learn more about using this node.
	</p>
</script>
